(this.webpackJsonpwoops=this.webpackJsonpwoops||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n.n(c),s=n(30),r=n.n(s),o=(n(39),n(40),n(41),n(42),n(20)),i=n(10),u=n(1),l=n.n(u),j=n(2),b=n(9),p=(n(44),n(28)),d=n(15),f=n(6);function O(){var e=Object(c.useState)(null),t=Object(b.a)(e,2),n=t[0],a=t[1],s=Object(i.f)();Object(c.useEffect)((function(){var e=Object(d.b)();Object(d.c)(e,(function(e){a(e||null)}))}),[]);var r=function(){var e=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(d.b)(),e.prev=1,e.next=4,Object(d.e)(t);case 4:s("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error connecting to Firebase!",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("header",{children:Object(f.jsxs)("nav",{children:[Object(f.jsx)(o.b,{className:"woops-logo",to:n?"/":"/login",children:"Woops!"}),n?Object(f.jsxs)("div",{className:"acc-links",children:[Object(f.jsxs)(o.b,{className:"profile-btn",to:"/me",children:[Object(f.jsx)(p.b,{className:"icon"}),"Profile"]}),Object(f.jsxs)("button",{className:"logout-btn",onClick:r,children:[Object(f.jsx)(p.a,{className:"icon"}),"Logout"]})]}):null]})})}n(47);var m=n(11),h=a.a.createContext({woops:[],sortWoops:function(){},initializeWoops:function(){},addWoop:function(){},getUserWoops:function(){}}),x=function(e){var t=e.children,n=Object(c.useState)([]),a=Object(b.a)(n,2),s=a[0],r=a[1];return Object(f.jsx)(h.Provider,{value:{woops:s,sortWoops:function(e){var t=Object(m.a)(e);return t.sort((function(e,t){return new Date(t.updateTime).getTime()-new Date(e.updateTime).getTime()})),t},initializeWoops:function(e){r(e)},addWoop:function(e){r([e].concat(Object(m.a)(s)))},getUserWoops:function(e){return s.filter((function(t){return t.email===e}))}},children:t})},v=h,g=(n(48),n(49),n(31));function w(e){var t=e.email,n=void 0===t?"":t,c=e.text,a=void 0===c?"":c;return Object(f.jsxs)("div",{className:"woop-card",children:[Object(f.jsxs)("p",{className:"email",children:[Object(f.jsx)(g.a,{className:"icon"}),n?n.match(/^.+(?=@)/)[0]:""]}),Object(f.jsx)("p",{className:"text",children:a})]})}function N(e){var t=e.woopsList,n=void 0===t?[]:t;return n.length>0?Object(f.jsx)("section",{className:"woops-feed",children:n.map((function(e,t){var n=e.email,c=e.text;return Object(f.jsx)(w,{email:n,text:c},t)}))}):null}function y(){var e=Object(i.f)(),t=Object(c.useState)([]),n=Object(b.a)(t,2),a=n[0],s=n[1],r=Object(c.useContext)(v);Object(c.useEffect)((function(){var t=Object(d.b)();Object(d.c)(t,(function(t){t?r.woops.length>0?s(r.woops):o():e("/login")}))})),Object(c.useEffect)((function(){s(r.woops)}),[r.woops]);var o=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://firestore.googleapis.com/v1/projects/woops-store/databases/(default)/documents/woops/");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c=n.documents.map((function(e){var t=e.fields,n=t.text.stringValue;return{email:t.email.stringValue,text:n,updateTime:e.updateTime}})),a=r.sortWoops(c),s(a),r.initializeWoops(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"dashboard-wrapper",children:[Object(f.jsx)("h1",{children:"Feeling embarrassed? So are we!"}),Object(f.jsx)(N,{woopsList:a})]})}n(50);var k=n(32),S=n(29),C=(n(51),"text"),W="email",E="password",L="submit";function T(e){var t=e.className,n=void 0===t?"":t,a=e.type,s=void 0===a?"text":a,r=e.required,o=void 0!==r&&r,i=e.label,u=void 0===i?"":i,l=e.name,j=void 0===l?"":l,p=e.value,d=void 0===p?"":p,O=e.register,m=void 0===O?{}:O,h=Object(c.useState)(""),x=Object(b.a)(h,2),v=x[0],g=x[1];return Object(c.useEffect)((function(){g(d)}),[d]),Object(f.jsxs)(f.Fragment,{children:[s===C||s===W||s===E?Object(f.jsx)("label",{htmlFor:j,children:u}):null,Object(f.jsx)("input",Object(S.a)(Object(S.a)({className:n},m),{},{name:j,required:o,type:s,onChange:function(e){return g(e.target.value)},value:v}))]})}function F(){var e=Object(c.useState)(!0),t=Object(b.a)(e,2),n=t[0],a=t[1],s=Object(k.a)(),r=s.register,o=s.handleSubmit,u=Object(i.f)(),p=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,c=t.password,e.prev=1,a=Object(d.b)(),e.next=5,Object(d.d)(a,n,c);case 5:u("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error connecting to firebase!",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(l.a.mark((function e(t){var n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,c=t.password,e.prev=1,a=Object(d.b)(),e.next=5,Object(d.a)(a,n,c);case 5:u("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error connecting to firebase!",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"login-background",children:Object(f.jsxs)("div",{className:"login-wrapper",children:[Object(f.jsxs)("section",{className:"login-text",children:[Object(f.jsx)("h1",{className:"woops-logo-animated",children:"Woops!"}),Object(f.jsxs)("p",{children:["Made a mistake?",Object(f.jsx)("br",{}),"Let's laugh at it together."]})]}),Object(f.jsxs)("section",{className:"login-form",children:[Object(f.jsxs)("form",{className:"login",onSubmit:o((function(e){n?p(e):O(e)})),children:[Object(f.jsx)("h2",{children:n?"Login":"Sign Up"}),Object(f.jsx)(T,{type:W,required:!0,label:"Email",name:"email",register:r("email")}),Object(f.jsx)(T,{type:E,required:!0,label:"Password",name:"password",register:r("password")}),Object(f.jsx)(T,{type:L,value:n?"Login":"Sign Up"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("p",{children:n?"New to Woops? ":"Already have an account? "}),Object(f.jsx)("button",{className:"switch-mode",onClick:function(){return a(!n)},children:n?"Create an account":"Login to your account"})]})]})]})})}n(52),n(53);function D(e){var t=e.maxLength,n=void 0===t?"150":t,a=Object(c.useState)(""),s=Object(b.a)(a,2),r=s[0],o=s[1],i=Object(c.useState)(null),u=Object(b.a)(i,2),p=u[0],O=u[1],m=Object(c.useContext)(v);Object(c.useEffect)((function(){var e=Object(d.b)();Object(d.c)(e,(function(e){O(e||null)}))}),[]);var h=function(){var e=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={fields:{email:{stringValue:p.email},text:{stringValue:r}}},e.prev=2,e.next=5,fetch("https://firestore.googleapis.com/v1/projects/woops-store/databases/(default)/documents/woops/",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(n)});case 5:m.addWoop({email:p.email,text:r}),o(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{className:"woops-builder",onSubmit:h,children:[Object(f.jsx)("textarea",{onChange:function(e){o(e.target.value)},placeholder:"Made a mistake? Let's laugh at it together",value:r,maxLength:n}),Object(f.jsxs)("div",{className:"build-footer",children:[Object(f.jsx)("p",{className:"text-count",children:r.length+"/"+n}),Object(f.jsx)(T,{className:"submit-btn",type:"submit",value:"Woops!"})]})]})}function I(){var e=Object(i.f)(),t=Object(c.useState)(null),n=Object(b.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)([]),o=Object(b.a)(r,2),u=o[0],p=o[1],O=Object(c.useContext)(v);Object(c.useEffect)((function(){var t=Object(d.b)();Object(d.c)(t,(function(t){t?s(t):(s(null),e("/login"))}))})),Object(c.useEffect)((function(){if(a)if(0===O.woops.length)m();else{var e=O.getUserWoops(a.email);p(e)}}),[a,O]),Object(c.useEffect)((function(){if(a){var e=O.getUserWoops(a.email);p(e)}}),[a,O,O.woops]);var m=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://firestore.googleapis.com/v1/projects/woops-store/databases/(default)/documents/woops/");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c=n.documents.map((function(e){var t=e.fields,n=t.text.stringValue;return{email:t.email.stringValue,text:n,updateTime:e.updateTime}})),s=O.sortWoops(c),O.initializeWoops(s),p(s.filter((function(e){return e.email===a.email}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"profile-wrapper",children:[Object(f.jsxs)("div",{className:"profile-info",children:[Object(f.jsxs)("h1",{children:["How are you doing, ",a?a.email.match(/^.+(?=@)/)[0]:"username","?"]}),Object(f.jsx)("div",{className:"profile-msg",children:0===u.length?Object(f.jsx)("p",{children:"Don't be ashamed. Everyone makes mistakes! Everyone has those days!"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("p",{children:["So far, you've ",Object(f.jsx)("span",{className:"bold",children:"wooped"})," ",u.length," time",u.length>1?"s":"","! That's a lot of learning you've done!"]}),Object(f.jsx)("p",{children:"Care to share more? Or maybe we'll just look back on it and laugh (or try to!)"})]})})]}),Object(f.jsx)(D,{}),Object(f.jsx)(N,{woopsList:u})]})}var P=function(){return Object(f.jsxs)(o.a,{children:[Object(f.jsx)(O,{}),Object(f.jsx)("main",{children:Object(f.jsxs)(i.c,{children:[Object(f.jsx)(i.a,{exact:!0,path:"/",element:Object(f.jsx)(y,{})}),Object(f.jsx)(i.a,{path:"/login",element:Object(f.jsx)(F,{})}),Object(f.jsx)(i.a,{path:"/me",element:Object(f.jsx)(I,{})})]})})]})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))},V=n(33);Object(V.a)({apiKey:"AIzaSyDxsc4FeehCtR_ktCnaAM-CQBJjCN_frCg",authDomain:"woops-store.firebaseapp.com",projectId:"woops-store",storageBucket:"woops-store.appspot.com",messagingSenderId:"255283029028",appId:"1:255283029028:web:fcee7dba07439825dde4b1"}),r.a.render(Object(f.jsx)(x,{children:Object(f.jsx)(P,{})}),document.getElementById("root")),U()}},[[54,1,2]]]);
//# sourceMappingURL=main.9deb1b17.chunk.js.map